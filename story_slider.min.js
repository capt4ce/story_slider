var Slider = function () { this.initialize.apply(this, arguments) }
    Slider.prototype = {

        initialize: function (slider) {
            this.ul = slider.children[0]
            this.li = this.ul.children

            // make <ul> as large as all <li>â€™s
            //this.ul.style.width = (this.li[0].clientWidth * this.li.length) + 'px'

            this.currentIndex = 0
        },

        goTo: function (index) {
            // filter invalid indices
            if (index < 0 || index > this.li.length - 1)
                return

            // move <ul> left
            this.ul.style.left = '-' + (100 * index) + '%'

            this.currentIndex = index
        },

        goToPrev: function () {
            this.goTo(this.currentIndex - 1)
        },

        goToNext: function () {
            this.goTo(this.currentIndex + 1)
        }
    }
    var sliders = []
    $(document).ready(function () {
        var stories = story.map(function (val, idx) {
            if (idx > 4)
                return;
            var elem =
                "<li id='slide-" + idx + "' class='slides'><a href='" + val.articleURL + "'>\
                        <div class='slide'>\
                            <img class='slider-img' src='"+ val.imgURL + "'>\
                            <span class='slider-description'>\
                                <div class='story-title'><h5>"+ val.title + "</h5></div>\
                                <div class='story-description'>"+ val.description + "</div>\
                            </span>\
                        </div>\
                    </a></li>"

            // var elem =
            //     "<li id='slide-" + idx + "' class='slides'><a href='" + val.articleURL + "'>\
            //                 aaa\
            //         </a></li>"

            return elem

        })
        var playlist = story.map(function (val, idx) {
            if (idx > 4)
                return;
            var elem =
                "<a href='javascript:sliders[0].goTo(" + (idx) + ")" + '' + "'><li id='playlist-" + idx + "' class='playlist'>\
                        "+ val.title + "\
                    </li></a>"
            return elem

        })
        var wraper_slider =
            "<div class='row slider-wrapper'>\
                    <div id='slider-playlist' class='col-md-3'>"+ playlist.join('') + "</div>\
                    <div id='slider-main' class='col-md-9'>\
                        <ul id='slider-list'>"
            + stories.join('') +
            "</ul>\
                    </div>\
                </div>"
        $('#story-slider').html(wraper_slider)
        $('#slider-main').each(function () {
            sliders.push(new Slider(this))
        })
        $('#slider-main').css('overflow', 'initial')
        setTimeout(function () {
            $('#slider-main').css('overflow', 'hidden')
        }, 0);

    })